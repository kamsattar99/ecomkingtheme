{% comment %}
  Announcement Bar Section
  For Ecom King Theme
{% endcomment %}

{%- for block in section.blocks -%}
  {%- case block.type -%}
    {%- when 'announcement' -%}
      <div class="announcement-bar" data-section-id="{{ section.id }}" data-section-type="announcement-bar" style="background-color: {{ block.settings.background_color }};">
        <div class="container">
          <div class="announcement-bar__content">
            {%- if block.settings.text != blank -%}
              <div class="announcement-bar__message" style="color: {{ block.settings.text_color }};">
                {%- if block.settings.link != blank -%}
                  <a href="{{ block.settings.link }}" class="announcement-bar__link">
                {%- endif -%}
                
                {{ block.settings.text }}
                
                {%- if block.settings.link != blank -%}
                  </a>
                {%- endif -%}
              </div>
            {%- endif -%}
          </div>
        </div>
      </div>
  {%- endcase -%}
{%- endfor -%}

<style>
.announcement-bar {
  padding: {{ section.settings.padding }}px 0;
  text-align: center;
  transition: all 0.3s ease;
  margin-top: 0 !important;
}

.announcement-bar__content {
  display: flex;
  align-items: center;
  justify-content: center;
}

.announcement-bar__message {
  font-size: {{ section.settings.font_size }}px;
  font-weight: {{ section.settings.font_weight }};
  letter-spacing: 0.05em;
}

.announcement-bar__link {
  color: inherit;
  text-decoration: none;
  display: block;
  width: 100%;
}

@media screen and (max-width: 767px) {
  .announcement-bar__message {
    font-size: {{ section.settings.font_size | minus: 1 }}px;
  }
}
</style>

{% schema %}
{
  "name": "Announcement bar",
  "max_blocks": 5,
  "settings": [
    {
      "type": "range",
      "id": "padding",
      "min": 5,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Vertical padding",
      "default": 10
    },
    {
      "type": "range",
      "id": "font_size",
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Font size",
      "default": 14
    },
    {
      "type": "select",
      "id": "font_weight",
      "label": "Font weight",
      "options": [
        {
          "value": "400",
          "label": "Regular"
        },
        {
          "value": "500",
          "label": "Medium"
        },
        {
          "value": "600",
          "label": "Semibold"
        },
        {
          "value": "700",
          "label": "Bold"
        }
      ],
      "default": "400"
    }
  ],
  "blocks": [
    {
      "type": "announcement",
      "name": "Announcement",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "label": "Text",
          "default": "Announce something here"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        },
        {
          "type": "color",
          "id": "background_color",
          "label": "Background",
          "default": "#141414"
        },
        {
          "type": "color",
          "id": "text_color",
          "label": "Text",
          "default": "#e1c68b"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Announcement bar",
      "category": "Promotional",
      "blocks": [
        {
          "type": "announcement"
        }
      ]
    }
  ]
}
{% endschema %}
